mutate(mean = mean(earn)) %>% slice(1) %>%       # Calculate average per id per pre/post treat,
ungroup() %>%                                    # then convert the df into a table with only
select(id, d, mean, p, post) %>%                 # id, treatment status, and avg before/after treat.
pivot_wider(names_from = post, values_from = mean) %>%
mutate(diff_in_means = post-pre) %>%            # Calculate difference in means for each ind.
select(-c(post, pre))                           # Drop unnecessary variables.
score_control = df_itemd[df_itemd$d == 0, ]   # i generate which is which to get the
score_treatment =  df_itemd[df_itemd$d == 1, ]  # nearest neighbors using RANN
nn_indexes = nn2(score_control$p, score_treatment$p, k = 2)
df_nn = as.data.frame(nn_indexes$nn.idx)
control_diff = (score_control[df_nn$V1, 'diff_in_means'] + score_control[df_nn$V2, 'diff_in_means'])/2
alpha = colMeans(score_treatment$diff_in_means - control_diff)
return(alpha)
}
did_nn_4 <- match_did_nn_estimator(4, df)
did_nn_5 <- match_did_nn_estimator(5, df)
did_nn_6 <- match_did_nn_estimator(6, df)
did_nn_4
did_nn_5
did_nn_6
epanechnikov = function(z) {0.75*(1-z^2)*as.numeric(abs(z)<1)}
match_did_kernel_estimator = function(timeframe, data) {
post_vec = 1:timeframe
pre_vec = -post_vec
valid_indexes_post = data %>% filter(qtr %in% post_vec) %>%
select(id) %>% unique()
valid_indexes_pre = data %>% filter(qtr %in% pre_vec) %>%
select(id) %>% unique()
valid_indexes = intersect(valid_indexes_post, valid_indexes_pre) %>% unlist()
df_itemd = data %>% filter(id %in% valid_indexes) %>%
filter(qtr>= -timeframe) %>% filter(qtr <= timeframe) %>%
mutate(post = ifelse(qtr > 0, "post", "pre")) %>%
group_by(post, id) %>%
mutate(mean = mean(earn)) %>% slice(1) %>%
ungroup() %>%
select(id, d, mean, p, post) %>%
pivot_wider(names_from = post, values_from = mean) %>%
mutate(diff_in_means = post-pre) %>%
select(-c(post, pre))
score_control = df_itemd[df_itemd$d == 0, ]   # i generate which is which to get the
score_treatment =  df_itemd[df_itemd$d == 1, ]  #
combinations = expand.grid(score_treatment$p, score_control$p)
h = 2.345*nrow(df_itemd)^(-1/5)*sd(df_itemd$p)
Kern_mat = matrix(epanechnikov((combinations[, 2] - combinations[, 1])/h), nrow = nrow(score_treatment))
W_mat = apply(Kern_mat, 2, function(i) i/sum(i))
alpha = colMeans(score_treatment$diff_in_means - W_mat %*% score_control$diff_in_means)
return(alpha)
}
did_kernel_4 <- match_did_kernel_estimator(4, df)
did_kernel_5 <- match_did_kernel_estimator(5, df)
did_kernel_6 <- match_did_kernel_estimator(6, df)
did_kernel_4
did_kernel_5
did_kernel_6
df %>% ggplot(aes(x = p, group = d)) +
geom_density() + facet_wrap(~d) +
theme_bw() + scale_color_brewer(palette="Paired") +
ggtitle("Distribution of p for treated (d = 1) and untreated (d = 0) individuals")
control_p = df %>% filter(d == 0) %>% select(p)
control_t = df %>% filter(d == 1) %>% select(p)
range_control = c(min(control_p), max(control_p))
range_treatment = c(min(control_t), max(control_t))
range_control
range_treatment
lower_bound_score = max(min(control_p), min(control_t))
upper_bound_score = min(max(control_p), max(control_t))
lower_bound_score
upper_bound_score
common_support_df = df %>% filter(between(p, lower_bound_score, upper_bound_score))
did_nn_cs_4 <- match_did_nn_estimator(4, common_support_df)
did_nn_cs_5 <- match_did_nn_estimator(5, common_support_df)
did_nn_cs_6 <- match_did_nn_estimator(6, common_support_df)
did_nn_cs_4
did_nn_cs_5
did_nn_cs_6
did_kernel_cs_4 <- match_did_kernel_estimator(4, common_support_df)
did_kernel_cs_5 <- match_did_kernel_estimator(5, common_support_df)
did_kernel_cs_6 <- match_did_kernel_estimator(6, common_support_df)
did_kernel_cs_4
did_kernel_cs_5
did_kernel_cs_6
df2 = read_csv('enoe_q219-q122_married_female.csv')
glimpse(df2)
table(df2$time)
df2_aug = df2 %>% mutate(event = time - 4, # Creating the event-time variable.
Dm3 = ifelse(event == -3, 1, 0), # Generating the set of dummies
Dm2 = ifelse(event == -2, 1, 0), # specific to each event time,
Dm1 = ifelse(event == -1, 1, 0), # from -3 to +7.
D0 = ifelse(event == 0, 1, 0),
D1 = ifelse(event == 1, 1, 0),
D2 = ifelse(event == 2, 1, 0),
D3 = ifelse(event == 3, 1, 0),
D4 = ifelse(event == 4, 1, 0),
D5 = ifelse(event == 5, 1, 0),
D6 = ifelse(event == 6, 1, 0),
D7 = ifelse(event == 7, 1, 0),
edusq = edu^2) # Creating the edusq (education squared) variable.
glimpse(df2_aug)
# Computing the mean of variable "event" by "time", as requested:
check <- df2_aug %>% group_by(time) %>% summarize(event_mean = mean(event, na.rm=TRUE))
check
data_reg = df2_aug %>% select(-c(quarter, ent, Dm1, event,
time, newid, dmarr))
data_unemp = data_reg %>% select(-c(formal_new, informal_new, inact))
reg_unemp = lm(unemp ~ ., data_unemp)
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot()
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot()
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() %>% theme_bw()
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot()
data_inac = data_reg %>% select(-c(formal_new, informal_new, unemp))
reg_inac = lm(inact ~ ., data_inac)
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot()
data_formal_emp = data_reg %>% select(-c(inact, informal_new, unemp))
reg_form = lm(formal_new ~., data_formal_emp)
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>% dwplot()
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() + geom_vline(x=0, linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() #+ geom_vline(x=0, linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() + geom_hline(y='D0', linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() + geom_hline(y=D0, linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() #+ geom_hline(y=D0, linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() + geom_hline(y=1, linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() + geom_hline(D='D0', linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() + geom_hline('D0', linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() + theme_bw() + geom_hline(yintercept='D0', linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(vline = geom_vlie(colour='black', linetype=2)) + theme_bw() + geom_hline(yintercept='D0', linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(vline = geom_vline(colour='black', linetype=2)) + theme_bw() + geom_hline(yintercept='D0', linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() +
theme_bw(base_size=4) +
geom_hline(yintercept='D0', linetype='dashed')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', \alpha=0.5)
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5)
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
gg_title("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(lwd=1) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(lwd=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dodge_size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dodge_size=0.1) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot() +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black")) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black"), whisker_arges = list(color="black"), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black"), whisker_args = list(color="black"), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=3), whisker_args = list(color="black"), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=3), whisker_args = list(color="black", size=3), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=1), whisker_args = list(color="black", size=3), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
annotate(geom = "text", x = 0, y = 'D', label = "TREATMENT ASSIGNMENT", color = "black", alpha=0.5,
angle = 90) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
annotate(geom = "text", x = 0, y = 'D0', label = "TREATMENT ASSIGNMENT", color = "black", alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
annotate(geom = "text", x = 0.0025, y = 'D0', label = "TREATMENT ASSIGNMENT", color = "black", alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
annotate(geom = "text", x = 0.0025, y = 'D0' + 0.01, label = "TREATMENT ASSIGNMENT", color = "black", alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
annotate(geom = "text", x = 0.0025, y = 'D0', label = "TREATMENT ASSIGNMENT", color = "black", alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
ylabel('a')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment")
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot() %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
data_inac = data_reg %>% select(-c(formal_new, informal_new, unemp))
reg_inac = lm(inact ~ ., data_inac)
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot() %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot()
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>%dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Formal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Informal employment') +
ylab('Event-time dummy (from -3 to +7)')
data_inform = data_reg %>% select(-c(inact, formal_new, unemp))
reg_infor = lm(informal_new ~ ., data_inform)
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Informal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Informal employment') +
ylab('Event-time dummy (from -3 to +7)')
data_formal_emp = data_reg %>% select(-c(inact, informal_new, unemp))
reg_form = lm(formal_new ~., data_formal_emp)
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Formal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Formal employment") +
xlab('Formal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Informal employment") +
xlab('Informal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Informal employment") +
xlab('Informal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
reg_unemp
reg_unemp$coefficients
reg_unemp$D0
reg_unemp$coefficients[D0]
reg_unemp['D0']
reg_unemp[D0]
reg_unemp$coefficients[D0]
reg_unemp$coefficients[]
reg_unemp$coefficients[1]
reg_unemp$coefficients[2]
reg_unemp$coefficients[11]
reg_unemp$coefficients[12]
reg_unemp$coefficients[20]
reg_unemp$coefficients[21]
reg_unemp$coefficients[23]
reg_unemp$coefficients[27]
reg_unemp$coefficients[30]
reg_unemp$coefficients[35]
reg_unemp$coefficients[40]
reg_unemp$coefficients[38]
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_unemp$coefficients[38],linetype='dashed', alpha=0.5)
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_unemp$coefficients[38],linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_unemp$coefficients[38],linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_inac$coefficients[38],linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_form$coefficients[38],linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Formal employment") +
xlab('Formal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_infor$coefficients[38],linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Informal employment") +
xlab('Informal employment') +
ylab('Event-time dummy (from -3 to +7)')
data_reg = df2_aug %>% select(-c(quarter, ent, Dm1, event,
time, newid, dmarr))
data_unemp = data_reg %>% select(-c(formal_new, informal_new, inact))
reg_unemp = lm(unemp ~ ., data_unemp)
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_unemp$coefficients[38],linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_inac$coefficients[38],linetype='dashed', alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_infor$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Dot-and-whisker plot: Informal employment") +
xlab('Informal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_inac$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Dot-and-whisker plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_form$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Dot-and-whisker plot: Formal employment") +
xlab('Formal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_unemp$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_unemp$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_unemp$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Dot-and-whisker plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
Event-study
broom::tidy(reg_unemp) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_unemp$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Event-study (dot-and-whisker) plot: Unemployment") +
xlab('Unemployment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_inac) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_inac$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Event-study (dot-and-whisker) plot: Inactivity") +
xlab('Inactivity') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_form) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_form$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Event-study (dot-and-whisker) plot: Formal employment") +
xlab('Formal employment') +
ylab('Event-time dummy (from -3 to +7)')
broom::tidy(reg_infor) %>% filter(str_detect(term, 'D')) %>% dwplot(dot_args= list(color = "black", size=2), whisker_args = list(color="black", size=1), size=2) +
theme_bw() +
geom_hline(yintercept='D0', linetype='dashed', alpha=0.5) +
geom_vline(xintercept=reg_infor$coefficients[38],linetype='dashed', alpha=0.5) +
geom_vline(xintercept=0,linetype='dashed', color="red", alpha=0.5) +
ggtitle("Event-study (dot-and-whisker) plot: Informal employment") +
xlab('Informal employment') +
ylab('Event-time dummy (from -3 to +7)')
